---
title: React åˆ›å»ºç»„ä»¶çš„ä¸‰ç§æ–¹æ³•
date: 2019-08-10 12:10:10
tags:
    - React
categories: React
---

React åˆ›å»ºç»„ä»¶å­˜åœ¨ä¸‰ç§æ–¹å¼
1. å‡½æ•°å¼å®šä¹‰çš„æ— çŠ¶æ€ç»„ä»¶
2. es5åŸç”Ÿæ–¹å¼React.createClasså®šä¹‰çš„ç»„ä»¶
3. es6å½¢å¼çš„extends React.Componentå®šä¹‰çš„ç»„ä»¶

<!-- more -->

æ— çŠ¶æ€å‡½æ•°å¼ç»„ä»¶
åˆ›å»ºæ— çŠ¶æ€å‡½æ•°å¼ç»„ä»¶å½¢å¼æ˜¯ä»React 0.14ç‰ˆæœ¬å¼€å§‹å‡ºç°çš„ã€‚å®ƒæ˜¯ä¸ºäº†åˆ›å»ºçº¯å±•ç¤ºç»„ä»¶ï¼Œè¿™ç§ç»„ä»¶åªè´Ÿè´£æ ¹æ®ä¼ å…¥çš„propsæ¥å±•ç¤ºï¼Œä¸æ¶‰åŠåˆ°è¦stateçŠ¶æ€çš„æ“ä½œã€‚å…·ä½“çš„æ— çŠ¶æ€å‡½æ•°å¼ç»„ä»¶ï¼Œå…¶å®˜æ–¹æŒ‡å‡ºï¼š

> åœ¨å¤§éƒ¨åˆ†Reactä»£ç ä¸­ï¼Œå¤§å¤šæ•°ç»„ä»¶è¢«å†™æˆæ— çŠ¶æ€çš„ç»„ä»¶ï¼Œé€šè¿‡ç®€å•ç»„åˆå¯ä»¥æ„å»ºæˆå…¶ä»–çš„ç»„ä»¶ç­‰,è¿™ç§é€šè¿‡å¤šä¸ªç®€å•ç„¶ååˆå¹¶æˆä¸€ä¸ªå¤§åº”ç”¨çš„è®¾è®¡æ¨¡å¼è¢«æå€¡ã€‚

æ— çŠ¶æ€å‡½æ•°å¼ç»„ä»¶å½¢å¼ä¸Šè¡¨ç°ä¸ºä¸€ä¸ªåªå¸¦æœ‰ä¸€ä¸ªrenderæ–¹æ³•çš„ç»„ä»¶ç±»ï¼Œé€šè¿‡å‡½æ•°å½¢å¼æˆ–è€…ES6 ç®­å¤´ functionçš„å½¢å¼åœ¨åˆ›å»ºï¼Œå¹¶ä¸”è¯¥ç»„ä»¶æ˜¯æ— stateçŠ¶æ€çš„ã€‚å…·ä½“çš„åˆ›å»ºå½¢å¼å¦‚ä¸‹ï¼š

å‡½æ•°å½¢å¼åˆ›å»º
```
import React from 'react'
function FunctionC(props){
    return(
         <div> Hello {props.name}</div>
    )
}

export default FunctionC;
```
ES6 ç®­å¤´å‡½æ•°åˆ›å»º

```

import React from 'react'
const FunctionC =(props) =>{
    return(
                 <div> Hello {props.name}</div>
            )
}

export default FunctionC;
```

è°ƒç”¨
```
 <FunctionC name="haha" />
```

æ— çŠ¶æ€ç»„ä»¶çš„åˆ›å»ºå½¢å¼ä½¿ä»£ç çš„å¯è¯»æ€§æ›´å¥½ï¼Œå¹¶ä¸”å‡å°‘äº†å¤§é‡å†—ä½™çš„ä»£ç ï¼Œç²¾ç®€è‡³åªæœ‰ä¸€ä¸ªrenderæ–¹æ³•ï¼Œå¤§å¤§çš„å¢å¼ºäº†ç¼–å†™ä¸€ä¸ªç»„ä»¶çš„ä¾¿åˆ©ï¼Œé™¤æ­¤ä¹‹å¤–æ— çŠ¶æ€ç»„ä»¶è¿˜æœ‰ä»¥ä¸‹å‡ ä¸ªæ˜¾è‘—çš„ç‰¹ç‚¹ï¼š

1. ç»„ä»¶ä¸ä¼šè¢«å®ä¾‹åŒ–ï¼Œæ•´ä½“æ¸²æŸ“æ€§èƒ½å¾—åˆ°æå‡
   å› ä¸ºç»„ä»¶è¢«ç²¾ç®€æˆä¸€ä¸ªrenderæ–¹æ³•çš„å‡½æ•°æ¥å®ç°çš„ï¼Œç”±äºæ˜¯æ— çŠ¶æ€ç»„ä»¶ï¼Œæ‰€ä»¥æ— çŠ¶æ€ç»„ä»¶å°±ä¸ä¼šåœ¨æœ‰ç»„ä»¶å®ä¾‹åŒ–çš„è¿‡ç¨‹ï¼Œæ— å®ä¾‹åŒ–è¿‡ç¨‹ä¹Ÿå°±ä¸éœ€è¦åˆ†é…å¤šä½™çš„å†…å­˜ï¼Œä»è€Œæ€§èƒ½å¾—åˆ°ä¸€å®šçš„æå‡ã€‚

2. ç»„ä»¶ä¸èƒ½è®¿é—®thiså¯¹è±¡
   æ— çŠ¶æ€ç»„ä»¶ç”±äºæ²¡æœ‰å®ä¾‹åŒ–è¿‡ç¨‹ï¼Œæ‰€ä»¥æ— æ³•è®¿é—®ç»„ä»¶thisä¸­çš„å¯¹è±¡ï¼Œä¾‹å¦‚ï¼šthis.refã€this.stateç­‰å‡ä¸èƒ½è®¿é—®ã€‚è‹¥æƒ³è®¿é—®å°±ä¸èƒ½ä½¿ç”¨è¿™ç§å½¢å¼æ¥åˆ›å»ºç»„ä»¶

3. ç»„ä»¶æ— æ³•è®¿é—®ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•
   å› ä¸ºæ— çŠ¶æ€ç»„ä»¶æ˜¯ä¸éœ€è¦ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†å’ŒçŠ¶æ€ç®¡ç†ï¼Œæ‰€ä»¥åº•å±‚å®ç°è¿™ç§å½¢å¼çš„ç»„ä»¶æ—¶æ˜¯ä¸ä¼šå®ç°ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚æ‰€ä»¥æ— çŠ¶æ€ç»„ä»¶æ˜¯ä¸èƒ½å‚ä¸ç»„ä»¶çš„å„ä¸ªç”Ÿå‘½å‘¨æœŸç®¡ç†çš„ã€‚

4. æ— çŠ¶æ€ç»„ä»¶åªèƒ½è®¿é—®è¾“å…¥çš„propsï¼ŒåŒæ ·çš„propsä¼šå¾—åˆ°åŒæ ·çš„æ¸²æŸ“ç»“æœï¼Œä¸ä¼šæœ‰å‰¯ä½œç”¨

ğŸ…:æ— çŠ¶æ€ç»„ä»¶è¢«é¼“åŠ±åœ¨å¤§å‹é¡¹ç›®ä¸­å°½å¯èƒ½ä»¥ç®€å•çš„å†™æ³•æ¥åˆ†å‰²åŸæœ¬åºå¤§çš„ç»„ä»¶ï¼Œæœªæ¥Reactä¹Ÿä¼šè¿™ç§é¢å‘æ— çŠ¶æ€ç»„ä»¶åœ¨è­¬å¦‚æ— æ„ä¹‰çš„æ£€æŸ¥å’Œå†…å­˜åˆ†é…é¢†åŸŸè¿›è¡Œä¸€ç³»åˆ—ä¼˜åŒ–ï¼Œæ‰€ä»¥åªè¦æœ‰å¯èƒ½ï¼Œå°½é‡ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶ã€‚

React.createClassæ˜¯reactåˆšå¼€å§‹æ¨èçš„åˆ›å»ºç»„ä»¶çš„æ–¹å¼ï¼Œç›®å‰ä¸è¢«æ¨èï¼Œä¸å†èµ˜è¿°

React.Componentæ˜¯ä»¥ES6çš„å½¢å¼æ¥åˆ›å»ºreactçš„ç»„ä»¶çš„ï¼Œæ˜¯Reactç›®å‰æä¸ºæ¨èçš„åˆ›å»ºæœ‰çŠ¶æ€ç»„ä»¶çš„æ–¹å¼,React.Componentå½¢å¼å¦‚ä¸‹:
```
import React, { Component } from 'react';

export default class Es6 extends Component {

    constructor(props) {
        super(props);
        // è®¾ç½® initial state
        this.state = {
            text: props.initialValue || 'placeholder'
        };
    }
    handleChange = (event) => {
        this.setState({
            text: event.target.value
        });
    }

    render() {
        return (
            <div>
                Type something:
                <input onChange={this.handleChange}
               value={this.state.text} />
            </div>
        );
    }
}

```

å¼•ç”¨ï¼š
```
  <Es6  initialValue={'ejwrg'}/>
```

React.Componentåˆ›å»ºçš„ç»„ä»¶ï¼Œå…¶æˆå‘˜å‡½æ•°ä¸ä¼šè‡ªåŠ¨ç»‘å®šthisï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨ç»‘å®šï¼Œå¦åˆ™thisä¸èƒ½è·å–å½“å‰ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚
ç»‘å®šthisçš„å››ç§æ–¹æ³•:
1. æ„é€ å‡½æ•°ä¸­ç»‘å®š
```
// è°ƒç”¨
<input onChange={this.handleChange}
               value={this.state.text} />

// ç»‘å®š
constructor(props) {
   super(props);
   this.handleClick = this.handleClick.bind(this); 
}

// å®šä¹‰
handleClick(){
    // ...
}
```

2. ä½¿ç”¨bindæ¥ç»‘å®š
```
// è°ƒç”¨
<div onClick={this.handleClick.bind(this)}></div> 

// å®šä¹‰
handleClick(){
    // ...
}
```

3. ä½¿ç”¨ç®­å¤´å‡½æ•°ç»‘å®š
```
// è°ƒç”¨ç»‘å®š
<div onClick={()=>this.handleClick()}></div> 

// å®šä¹‰
handleClick(){
    // ...
}
```

4. ç®­å¤´å‡½æ•°å®šä¹‰

```
// è°ƒç”¨ç»‘å®š
<div onClick={his.handleClick}></div> 

// å®šä¹‰
handleClick =() =>{
    // ...
}
```

ç»„ä»¶å®šä¹‰æ–¹å¼
1ã€åªè¦æœ‰å¯èƒ½ï¼Œå°½é‡ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶åˆ›å»ºå½¢å¼ã€‚
2ã€å¦åˆ™ï¼ˆå¦‚éœ€è¦stateã€ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ç­‰ï¼‰ï¼Œä½¿ç”¨`React.Component`è¿™ç§es6å½¢å¼åˆ›å»ºç»„ä»¶

å‚è€ƒåšå®¢:
[https://www.cnblogs.com/soyxiaobi/p/9573767.html](https://www.cnblogs.com/soyxiaobi/p/9573767.html)
